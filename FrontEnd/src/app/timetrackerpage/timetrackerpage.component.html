<main>
  <!--top nav-->
  <div>
    <nav class="navbar navbar-expand-lg" style="background-color: #240c30">
      <div class="container-fluid ms-5">
        <button
          class="btn btn-outline-warning"
          routerLink="/timetrackerpage"
          routerLinkActive="active"
        >
          TIME TRACKER
        </button>

        <!-- <button
          class="btn btn-outline-warning"
          routerLink="/timetrackerpage"
          (click)="onStart()"
        >
          Start
        </button> -->
        <div class="nav_right">
          <ul class="navlist d-flex">
            <li>
              <div class="fw-bold text-white me-3 mt-2 homebell ps-3">
                <i class="bi bi-house-door-fill" routerLink="/home"></i>
              </div>
            </li>
            <li>
              <div class="fw-bold text-white me-3 mt-2 homebell ps-3">
                <i class="bi bi-bell"></i>
              </div>
            </li>
            <li>
              <button type="button" mat-button (click)="drawer.toggle()">
                <img src="/assets/images/usericon.webp" alt="" class="prof" />
              </button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <mat-drawer-container class="example-container">
      <mat-drawer #drawer class="example-sidenav" mode="side" position="end">
        <div class="container mt-4 mb-4 p-3 d-flex justify-content-center">
          <div class="profilecard p-4">
            <div
              class="image d-flex flex-column justify-content-center align-items-center"
            >
              <button class="btn btn-secondary">
                <img
                  src="/assets/images/usericon.webp"
                  height="90"
                  width="100"
                /></button
              ><br /><br />
              <span class="name mt-3" style="color: black">{{
                userData?.name
              }}</span>
              <br /><span class="idd" style="color: black">{{
                userData?.email
              }}</span>
              <div
                class="d-flex flex-row justify-content-center align-items-center gap-2"
              ></div>
              <br />
              <div class="text mt-3">
                <span style="color: black">{{ userData?.roles }}</span>
              </div>

              <div class="d-flex mt-2">
                <button class="btn1" routerLink="">Logout</button>
              </div>
            </div>
          </div>
        </div>
      </mat-drawer>
      <div class="example-sidenav-content"></div>
    </mat-drawer-container>
    <!--  </div> -->
  </div>
  <!-- right user details and ends here -->
  <!-- /////sidenav -->
  <div class="sidebar">
    <p class="m-3 h4">Dashboard</p>
    <!-- <a class="active" routerLink="/timetrackerpage">Time Tracker</a> -->
    <a class="" routerLink="/home">Home</a>

    <a class="active" routerLink="#filter-nav">Time Sheet</a>
    <a routerLink="#">My Calendar</a>
  </div>
  <!-- ////sidenav end -->
  <!-- tracker modal form -->
  <div class="content">
    <div class="modal fade show" [class.show]="showTrackerModal">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add Details</h5>

            <!-- tracker modal form -->
            <div class="modal fade show" [class.show]="showTrackerModal">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Add Details</h5>
                    <button
                      (click)="onCloseTrackerModal()"
                      class="close"
                      type="button"
                      data-dismiss="modal"
                      aria-label="Close"
                    >
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <form [formGroup]="TrackerForm" (ngSubmit)="onTrackSubmit()">
                    <div class="modal-body">
                      <div class="form-group">
                        <label for="tdate">Date</label>
                        <input
                          type="date"
                          class="form-control"
                          formControlName="tdate"
                        />
                      </div>

                      <div class="form-group">
                        <label for="tproject">Projects</label>
                        <select
                          class="form-select form-control"
                          formControlName="tproject"
                        >
                          <option *ngFor="let item of Project">
                            {{ item.pname }}
                          </option>
                          <option
                            *ngIf="authservice.HaveAccess()"
                            (click)="onAddProject()"
                          >
                            Add Project
                          </option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label for="ttask">Tasks</label>
                        <select
                          class="form-select form-control"
                          formControlName="ttask"
                        >
                          <option *ngFor="let item of Tasks">
                            {{ item.tname }}
                          </option>
                          <option
                            *ngIf="authservice.HaveAccess()"
                            (click)="onAddTask()"
                          >
                            Add Task
                          </option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label for="tmode">Mode of Work</label>
                        <select
                          class="form-select form-control"
                          formControlName="tmode"
                        >
                          <option>Mode</option>
                          <option>Work from Home</option>
                          <option>Work from Office</option>
                          <option>Leave</option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label for="tbill">Billable/ Non-Billable</label>
                        <select
                          class="form-select form-control"
                          formControlName="tbill"
                        >
                          <option>Billable</option>
                          <option>Non-Billable</option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label for="ttime">Time</label>
                        <input
                          type="time"
                          class="form-control"
                          formControlName="ttime"
                        />
                      </div>

                      <div class="form-group">
                        <label for="tdesc">Description</label>
                        <textarea
                          class="text-area form-control"
                          formControlName="tdesc"
                        >
                        </textarea>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button
                        (click)="onCloseTrackerModal()"
                        class="close"
                        type="button"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                        Close
                        <span aria-hidden="true">&times;</span>
                      </button>

                      <button type="submit" class="btn btn-primary">
                        Submit
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- tracker modal form ends here -->

    <!-- project modal form starts here -->
    <div class="modal fade show" [class.show]="showProjectModal">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add Project</h5>
            <button
              (click)="onCloseProjectModal()"
              class="close"
              type="button"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form [formGroup]="proForm" (ngSubmit)="onProSubmit()">
            <div class="modal-body">
              <div class="form-group">
                <label for="pname">Enter Name</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="pname"
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                (click)="onCloseProjectModal()"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Close
              </button>
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- project modal form ends here -->

    <!-- task modal form starts here -->
    <div class="modal fade show" [class.show]="showTaskModal">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Add Task</h5>
            <button
              (click)="onCloseTaskModal()"
              class="close"
              type="button"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form [formGroup]="taskForm" (ngSubmit)="onTaskSubmit()">
            <div class="modal-body">
              <div class="form-group">
                <label for="tname">Enter Name</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="tname"
                />
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                (click)="onCloseTaskModal()"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Close
              </button>
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- task modal form ends here -->
    <!-- main body starts here-->

    <section id="filter-nav" class="filter_nav mt-3">
      <div class="work_details d-flex p-3" id="emp-details">
        <div class="emp_details d-flex">
          <p class="m-2">
            <i class="uil uil-envelope"></i> {{ userData.email }}
          </p>
          <p class="m-2"><i class="uil uil-user"></i> {{ userData.name }}</p>
        </div>

        <div class="date_details">
          <p class="m-2">
            <i class="uil uil-calendar-alt"></i>
            {{ myDate | date: "dd MMM yyyy" }}
          </p>
        </div>

        <div class="filter_details">
          <div class="m-2 filter_button d-flex">
            <i class="uil uil-filter me-2 mt-1"></i>
            <div class="filter_option">
              <select class="form-select">
                <option value="Filter" selected>Filter</option>
                <optgroup label="Period">
                  Period

                  <option>Yesterday</option>
                  <option>Last Week</option>
                  <option>This Week</option>
                  <option>This Month</option>
                  <option>This Year</option>
                </optgroup>
                <option>Projects</option>
                <option>Jobs</option>
              </select>
            </div>
          </div>
        </div>

        <div class="start_project">
          <button class="btn btn-success mt-2" (click)="onStart()">
            Start
          </button>
        </div>
      </div>
    </section>

    <!-- table body starts here -->
    <section class="mt-3 table_details">
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Date</th>
            <th scope="col">Project</th>
            <th scope="col">Task</th>
            <th scope="col">Mode</th>
            <th scope="col">Description</th>
            <th scope="col">Time</th>
            <th scope="col" colspan="3" class="text-center">Timer</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of trackers">
            <td scope="col">{{ item.tdate }}</td>
            <td scope="col">{{ item.tproject }}</td>
            <td scope="col">{{ item.ttask }}</td>
            <td scope="col">{{ item.tmode }}</td>
            <td scope="col">{{ item.tdesc }}</td>
            <td scope="col">{{ item.ttime }}</td>
            <td scope="col">
              <i
                class="uil uil-play ms-4 timer_icon"
                (click)="startstopTimer()"
              ></i>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
</main>
